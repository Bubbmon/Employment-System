{"version":3,"sources":["webpack:///./src/views/HR/MyChatHR.vue?e762","webpack:///src/views/HR/MyChatHR.vue","webpack:///./src/views/HR/MyChatHR.vue?6175","webpack:///./src/views/HR/MyChatHR.vue?ee4a","webpack:///./src/components/HR/HeaderHR.vue?ff47","webpack:///src/components/HR/HeaderHR.vue","webpack:///./src/components/HR/HeaderHR.vue?bab3","webpack:///./src/components/HR/HeaderHR.vue?4b74","webpack:///./src/components/HR/HeaderHR.vue?3081","webpack:///./src/views/HR/MyChatHR.vue?670a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","item","index","key","_v","_s","from","msg","directives","name","rawName","value","expression","attrs","domProps","on","$event","type","indexOf","_k","keyCode","send","apply","arguments","target","composing","newMessage","staticRenderFns","component","backToHome","staticStyle","activeIndex","handleSelect","slot"],"mappings":"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","file":"static/js/myChat.1f2d7b97.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"test\"},[_c('HeaderHR'),_c('div',{staticClass:\"chatbox\"},[_c('div',{staticClass:\"message\"},_vm._l((_vm.messageList),function(item,index){return _c('div',{key:index,staticClass:\"item\"},[_c('div',[_vm._v(_vm._s(item.from)+\" \"+_vm._s(item.msg))])])}),0),_c('div',{staticClass:\"inputbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newMessage),expression:\"newMessage\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.newMessage)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.send.apply(null, arguments)},\"input\":function($event){if($event.target.composing){ return; }_vm.newMessage=$event.target.value}}}),_c('button',{on:{\"click\":_vm.send}},[_vm._v(\"send\")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"test\">\n        <HeaderHR></HeaderHR>\n        <div class=\"chatbox\">\n            <div class=\"message\">\n                <div class=\"item\" v-for=\"(item,index) in messageList\" :key=\"index\">\n                    <div>{{item.from}}  {{item.msg}}</div>\n                </div>\n            </div>\n            <div class=\"inputbox\">\n                <input type=\"text\" v-model=\"newMessage\" @keyup.enter=\"send\">\n                <button @click=\"send\">send</button>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport HeaderHR from \"../../components/HR/HeaderHR.vue\"\nexport default {\n    name: 'test',\n    components: {\n        HeaderHR\n    },\n    data() {\n        return {\n            webSocketObj: null,\n            wsHeartflag: false,\n            reconnectTime: 0,\n            message: null,\n            newMessage: \"\",\n            messageList: [],\n            talkerId:decodeURI(this.$route.query.hrId)\n        }\n    },\n    created() {\n        this.initWebSocket();\n    },\n    destroyed() {\n        // this.websock.close() //离开路由之后断开websocket连接\n    },\n    methods: {\n        send() {\n            // this.webSocketObj.send(this.newMessage);\n           this.messageList.push({from:\"我\", msg: this.newMessage});\n           this.newMessage = encodeURIComponent(this.newMessage);\n\n            this.$http({\n                method: \"post\",\n                url: \"http://1.117.44.227:8088/employment/talk/talkTo\",\n                headers: {\n                    \"token\": this.$store.state.token.value,//此处放置请求到的用户token\n                    //TODO:把id换成消息接受者\n                    \"id\": this.talkerId,\n                    \"message\": this.newMessage\n                },\n            }).then(res => {\n                this.newMessage = \"\";\n                console.log(res.data);\n\n            })\n        },\n        initWebSocket() {\n            // this.$http({\n            //     method: \"get\",\n            //     url: \"http://1.117.44.227:8088/employment/webSocket\",\n            //     headers:{\n            //         token:this.$store.state.token.value\n            //     }\n            // }).then(res=>{\n            //     this.webSocketObj = res.data;\n            //     console.log(\"websocket:\" + this.webSocketObj);\n            // })\n            this.webSocketObj = new WebSocket(\n                \"ws://1.117.44.227:8088/employment/webSocket\"\n            );\n            this.webSocketObj.onopen = this.onOpen\n            this.webSocketObj.onmessage = this.onMessage\n            this.webSocketObj.onerror = this.onError\n            this.webSocketObj.onclose = this.onClose\n        },\n        onOpen() {\n\n            //- readyState 等于1 的时候建立链接成功\n            this.wsHeartflag = true;\n            this.webSocketObj.send(\"#open#\"+this.$store.state.token.value);\n            this.reconnectTime = 0;\n        },\n        timingHeart() {\n            // 心跳检测  每4.5分钟发送一次 \n            if (this.wsHeartflag) {\n                this.webSocketObj.send('heartbeat-test');\n            }\n            this.wsHeart = setTimeout(() => {\n                this.timingHeart();\n            }, 100 * 1000); // 100s心跳\n        },\n        onMessage(evt) {\n            // console.log(typeof(evt.data));\n            // this.message =JSON.stringify(evt.data);\n            this.message = JSON.parse(evt.data);\n            console.log((this.message)) \n            this.talkerId = this.message.id;\n            console.log(this.talkerId);\n            this.messageList.push({ from:this.message.id, msg: this.message.message });\n            // var received_msg = evt && JSON.parse(evt.data);\n            // if (received_msg.code === '1') {\n            //     // 支付成功\n            //     // this.$toast('恭喜您，支付成功，已升级成VIP');\n            //     this.onClose();\n            // } else {\n            //     // 支付失败\n            //     this.showSuccessPop = false;\n            // }\n        },\n        onError() {\n            // 链接失败，进行重连\n            clearTimeout(this.wsHeart);\n            this.wsHeartflag = false;\n            if (this.reconnectTime <= 5) {\n                setTimeout(() => {\n                    this.onOpen();\n                    this.reconnectTime += 1;\n                }, 5000);\n            } else {\n                this.$toast('抱歉，暂时无法连接到聊天服务器，请稍后再试');\n                this.onClose();\n            }\n        },\n        onClose() {\n            this.webSocketObj.send(\"#close#\"+this.$store.state.token.value);\n            this.wsHeartflag = false;\n            this.webSocketObj && this.webSocketObj.close && this.webSocketObj.close();\n        },\n    },\n}\n</script>\n<style scoped>\n.chatbox {\n    width: 600px;\n    height: 700px;\n    border: 1px solid black;\n    margin: 30px auto;\n    padding: 10px;\n}\n.message {\n    height: 550px;\n}\n.inputbox {\n    display: flex;\n}\ninput {\n    width: 500px;\n    height: 30px;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyChatHR.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyChatHR.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MyChatHR.vue?vue&type=template&id=229ddc27&scoped=true&\"\nimport script from \"./MyChatHR.vue?vue&type=script&lang=js&\"\nexport * from \"./MyChatHR.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MyChatHR.vue?vue&type=style&index=0&id=229ddc27&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"229ddc27\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"whole\"},[_c('div',{staticClass:\"logo\",on:{\"click\":_vm.backToHome}}),_c('div',{staticClass:\"self-center\",staticStyle:{\"width\":\"150px\",\"height\":\"100%\",\"float\":\"right\",\"display\":\"flex\"}},[_c('el-menu',{staticClass:\"el-menu-demo\",attrs:{\"default-active\":_vm.activeIndex,\"mode\":\"horizontal\"},on:{\"select\":_vm.handleSelect}},[_c('el-submenu',{attrs:{\"index\":\"1\"}},[_c('template',{slot:\"title\"},[_vm._v(\"个人中心\")]),_c('el-menu-item',{attrs:{\"index\":\"selfcenter\"},on:{\"select\":_vm.handleSelect}},[_vm._v(\"账户信息\")]),_c('el-menu-item',{attrs:{\"index\":\"issueResume\"},on:{\"select\":_vm.handleSelect}},[_vm._v(\"发布招聘信息\")]),_c('el-menu-item',{attrs:{\"index\":\"recruimentList\"},on:{\"select\":_vm.handleSelect}},[_vm._v(\"查看已发布的信息\")]),_c('el-menu-item',{attrs:{\"index\":\"chatListHR\"},on:{\"select\":_vm.handleSelect}},[_vm._v(\"我的聊天\")])],2)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!-- HR登录后的Header -->\n    <div class=\"whole\">\n        <div class=\"logo\" @click=\"backToHome\"></div>\n        <div class=\"self-center\" style=\"width:150px;height:100%; float:right; display:flex\">\n            <el-menu :default-active=\"activeIndex\" class=\"el-menu-demo\" mode=\"horizontal\" @select=\"handleSelect\">\n                <el-submenu index=\"1\">\n                    <template slot=\"title\">个人中心</template>\n                    <el-menu-item index=\"selfcenter\" @select=\"handleSelect\">账户信息</el-menu-item>\n                    <el-menu-item index=\"issueResume\" @select=\"handleSelect\">发布招聘信息</el-menu-item>\n                    <el-menu-item index=\"recruimentList\" @select=\"handleSelect\">查看已发布的信息</el-menu-item>\n                    <el-menu-item index=\"chatListHR\" @select=\"handleSelect\">我的聊天</el-menu-item>\n                </el-submenu>\n            </el-menu>\n        </div>\n    </div>\n</template>\n<script>\nexport default {\n    data(){\n        return{\n            activeIndex:\"1\"\n        }\n    },\n    methods:{\n        //key参数的值为el-menu-item的index\n        handleSelect(key){\n            if(key == \"selfcenter\"){\n                this.$router.push(\"/selfCenterHR\");\n            }else if(key == \"issueResume\"){\n                this.$router.push(\"/issueRecruimentInfo\");\n            }else if(key == \"recruimentList\"){\n                this.$router.push(\"/recruimentList\");\n            }else if(key == \"chatListHR\"){\n                this.$router.push(\"/chatListHR\");\n            }\n        },\n        backToHome(){\n            this.$router.push(\"/searchHR\");\n        }\n    }\n    \n}\n</script>\n<style scoped>\n.whole{\n    background-color: #2f2f2f;\n    color: #fff;\n    height: 60px;\n}\n.self-center >>> .el-menu--horizontal>.el-submenu .el-submenu__title:hover{\n    background-color: #464646;\n}\n.self-center >>> .el-menu--horizontal>.el-submenu:hover .el-submenu__title{\n    color: #F2F2F2;\n}\n.self-center >>> .el-submenu .el-menu-item{\n    background-color: #464646;\n}\n.whole{\n    background-color: #2f2f2f;\n}\n.self-center{\n    background-color: #2f2f2f;\n}\n.self-center >>> .el-submenu{\n    background-color: #2f2f2f;\n}\n.logo{\n    margin-top: 10px;\n    cursor: pointer;\n    width: 60px;\n    height: 30px;\n    float: left;\n    background-image: url(\"../../assets/images/pin.jpg\");\n    background-size: cover;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderHR.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderHR.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HeaderHR.vue?vue&type=template&id=0dae64fc&scoped=true&\"\nimport script from \"./HeaderHR.vue?vue&type=script&lang=js&\"\nexport * from \"./HeaderHR.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeaderHR.vue?vue&type=style&index=0&id=0dae64fc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0dae64fc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderHR.vue?vue&type=style&index=0&id=0dae64fc&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyChatHR.vue?vue&type=style&index=0&id=229ddc27&scoped=true&lang=css&\""],"sourceRoot":""}